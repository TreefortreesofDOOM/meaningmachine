{"version":3,"sources":["../src/lib/seam-webhook.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AACA,SAAS,eAAe;AADxB;AAMO,IAAM,cAAN,MAAkB;AAAA,EAGvB,YAAY,QAAgB;AAF5B,uBAAS,UAAT;AAGE,uBAAK,UAAW,IAAI,QAAQ,MAAM;AAAA,EACpC;AAAA,EAEA,OAAO,SAAiB,SAAmD;AACzE,WAAO,mBAAK,UAAS,OAAO,SAAS,OAAO;AAAA,EAC9C;AACF;AATW","sourcesContent":["import type { SeamEvent } from 'seamapi-types'\nimport { Webhook } from 'svix'\n\n// UPSTREAM: This type should come from @seamapi/types.\nexport type SeamWebhookEvent = Distribute<SeamEvent['event_type']>\n\nexport class SeamWebhook {\n  readonly #webhook: Webhook\n\n  constructor(secret: string) {\n    this.#webhook = new Webhook(secret)\n  }\n\n  verify(payload: string, headers: Record<string, string>): SeamWebhookEvent {\n    return this.#webhook.verify(payload, headers) as SeamWebhookEvent\n  }\n}\n\ntype Distribute<EventType> = EventType extends SeamEvent['event_type']\n  ? {\n      event_type: EventType\n    } & Extract<SeamEvent, { event_type: EventType }>['payload']\n  : never\n"]}